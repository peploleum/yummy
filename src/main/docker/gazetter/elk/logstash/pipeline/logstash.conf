input {
	 file {
    path => "/usr/share/logstash/in/gazetter.csv"
    start_position => "beginning"
   sincedb_path => "/dev/null"
  }
}
filter {
   csv {
      separator => ","
		columns => ["geonameid","sciiname","countrycode","fclass","fcode","latitude","longitude","moddate","name","population"]
  }
  
  mutate {
             add_field => ["[location]","%{longitude}"]
             add_field => ["[location]","%{latitude}"]
         }
  mutate {
           convert => [ "[location]", "float" ]
         }
}

output {
	stdout {	}
	elasticsearch {
		hosts => "elasticsearch:9200"
		index => "gazetter"
	}
}
